# Family or Kitchen Board based on Azure Functions and SignalR

> UNDER CONSTRUCTION

A family calendar / kitchen board which shows information from

- from a Google Calendar
- from an Outlook Calendar
- random images from OneDrive

This app is access from a Rasberry Pi W an replaces the [family board previously used](https://www.hanselman.com/blog/HowToBuildAWallMountedFamilyCalendarAndDashboardWithARaspberryPiAndCheapMonitor.aspx).

## Architecture

Front-end is based on static pages which are hosted from Consumption Plan Azure Functions (class `StaticFileServer`)- derived from this [blog by Anthony Chu](https://anthonychu.ca/post/azure-functions-static-file-server/).

For basic protection `index.html` can only be opened with a Azure Functions key: `https://{function-app}.azurewebsites.net/index.html?code={key}`. All other static content is not protected.

Functions back-end uses Azure SignalR service to communicate board (calendar and image) changes to the web front-end.

### Access to Microsoft APIs

Access to Outlook Calendar and OneDrive API is handled with OAuth2.0 tokens where the access & refresh token is generated by calling the authorization endpoint and having a function storing the tokens in the associated storage account.

### Access to Google APIs

Access to the Google Calendar API is currently achieved with a [Service Account](https://cloud.google.com/iam/docs/service-accounts). Plan is to migrate also storing OAuth2.0 tokens (as with the Microsoft tokens) to have a more unified and generic model.

## Limitations

- currently only fix 3 weeks model
- only German weekdays from Monday to Sunday
